<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Inventory — Bloom & Thread</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Great+Vibes&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
<style>
body {
  font-family: 'Poppins', sans-serif;
  margin:0;
  display:flex;
  background: #f7f2f5;
  color: #4b3b4c;
  height:100vh;
  overflow:hidden;
}
/* Sidebar */
.sidebar {
  width: 240px;
  background: #fff0f5;
  padding: 2rem 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  border-right: 1px solid #e0cbbf;
  box-shadow: 2px 0 15px rgba(0,0,0,0.05);
  position: fixed;
  height: 100%;
}
.sidebar img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
.sidebar h2 { margin-top: 0.5rem; font-size: 1.3rem; color: #b85c8a; }
.sidebar p { font-size: 0.9rem; color: #9e718a; margin-bottom: 2rem; }
.sidebar ul { list-style: none; width: 100%; padding: 0; }
.sidebar ul li { margin: 0.5rem 0; }
.sidebar ul li a {
  text-decoration: none;
  display: flex;
  align-items: center;
  padding: 0.7rem 1rem;
  border-radius: 10px;
  color: #4b3b4c;
  transition: all 0.3s;
}
.sidebar ul li a:hover, .sidebar ul li a.active { background: #ffd6e7; color: #b85c8a; font-weight:600; }
.sidebar ul li a i { margin-right: 10px; }
/* Main + Footer wrapper */
.content-wrapper { margin-left: 240px; display: flex; flex-direction: column; flex: 1; min-height: 100vh; overflow: hidden; }
/* Main content */
main { flex: 1; padding: 20px; overflow-y: auto; }
/* Header */
header {
  background: linear-gradient(135deg, #ffb6c1, #ffdee9);
  padding: 20px;
  font-size: 1.5rem;
  font-weight: 600;
  color: #4b3b4c;
  border-radius: 12px;
  margin-bottom: 20px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}
/* Tables */
.table-container { overflow-x: auto; margin-bottom: 30px; }
table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}
th, td { padding: 12px 15px; text-align: center; border-bottom: 1px solid #eee; }
th { background: #ffdee9; font-weight:600; }
td input[type="number"] {
  width: 60px;
  padding: 5px;
  border-radius: 8px;
  border: 1px solid #ccc;
  text-align: center;
}
td button {
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  margin: 2px;
}
.update-btn { background: #5e366e; color: white; }
.update-btn:hover { background: #ffb6c1; color:#4b3b4a; }
/* Footer */
footer { text-align:center; padding:10px 0; font-size:0.9rem; color:#999; }
/* Responsive */
@media(max-width:768px){
  body { flex-direction: column; }
  .sidebar { width: 100%; flex-direction: row; justify-content: space-around; padding: 1rem; }
  .content-wrapper { margin-left:0; }
}
</style>
</head>
<body>

<aside class="sidebar">
  <img src="images/admin-avatar.png" alt="Admin Avatar">
  <h2>Admin</h2>
  <p>Administrator</p>
  <ul>
    <li><a href="admin.html"><i class="ri-dashboard-line"></i> Dashboard</a></li>
    <li><a href="adminorder.html"><i class="ri-shopping-bag-3-line"></i> Orders</a></li>
    <li><a href="inventory.html" class="active"><i class="ri-archive-2-line"></i> Inventory</a></li>
    <li><a href="supplier.html"><i class="ri-truck-line"></i> Suppliers</a></li>
    <li><a href="reports.html"><i class="ri-bar-chart-2-line"></i> Reports</a></li>
    <li><a href="#" id="logoutLink"><i class="ri-logout-circle-line"></i> Logout</a></li>
  </ul>
</aside>

<div class="content-wrapper">
  <main>
    <header>Bloom & Thread — Inventory</header>
    <div class="table-container">
      <table id="inventoryTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Product</th>
            <th>Image</th>
            <th>Stock</th>
            <th>Pending</th>
            <th>Rejected</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </main>
  <footer>&copy; 2025 Bloom & Thread. All rights reserved.</footer>
</div>

<script>
// Logout
document.getElementById('logoutLink').addEventListener('click', e=>{
  e.preventDefault();
  localStorage.clear();
  window.location.href='login.html';
});

// Initialize inventory if not exist
if(!localStorage.getItem('bloom_inventory')){
 let inventory = [
  { title: "Crochet Sunflower Hair Clips (Set of 2)", stock: 20, pending:0, rejected:0, img:"images/crochet_sunflower_hair_clips.jpg", price: 134 },
  { title: "Handmade Crochet Tote Bag with flowers", stock: 20, pending:0, rejected:0, img:"images/handmade_crochet_tote_bag.jpg", price: 280 },
  { title: "Crochet Tulip in Handmade Pot", stock: 20, pending:0, rejected:0, img:"images/crochet_tulip_handmade_pot.jpg", price: 70 },
  { title: "Crochet Red & White Hair Clip Collection (12 pcs)", stock: 20, pending:0, rejected:0, img:"images/crochet_red_white_hair_clips.jpg", price: 100 },
  { title: "Crochet Heart Hair Clips (Set of 6)", stock: 20, pending:0, rejected:0, img:"images/crochet_heart_hair_clips.jpg", price: 30 },
  { title: "Green Crochet Top", stock: 20, pending:0, rejected:0, img:"images/green_crochet_top.jpg", price: 250 },
  { title: "White Crochet Top", stock: 20, pending:0, rejected:0, img:"images/white_crochet_top.jpg", price: 210 },
  { title: "Mini Crochet Jacket", stock: 20, pending:0, rejected:0, img:"images/mini_crochet_jacket.jpg", price: 205 },
  { title: "Sexy Pink Crochet Top", stock: 20, pending:0, rejected:0, img:"images/sexy_pink_crochet_top.jpg", price: 265 },
  { title: "Square Crochet Top", stock: 20, pending:0, rejected:0, img:"images/square_crochet_top.jpg", price: 135 },
  { title: "Sexy Green Crochet Top", stock: 20, pending:0, rejected:0, img:"images/sexy_green_crochet_top.jpg", price: 950 },
  { title: "Brown Crochet Top", stock: 20, pending:0, rejected:0, img:"images/brown_crochet_top.jpg", price: 255 },
  { title: "Bunny Crochet Fan Cover", stock: 20, pending:0, rejected:0, img:"images/bunny_crochet_fan_cover.jpg", price: 169 },
  { title: "Crochet Water Bottle Bag with Purple Flower & White Accents", stock: 20, pending:0, rejected:0, img:"images/crochet_water_bottle_bag.jpg", price: 190 }
];
  localStorage.setItem('bloom_inventory', JSON.stringify(inventory));
}

// Render inventory
function renderInventory(){
  const inventory = JSON.parse(localStorage.getItem('bloom_inventory'));
  const tbody = document.querySelector('#inventoryTable tbody');
  tbody.innerHTML='';
  inventory.forEach((item,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${item.title}</td>
      <td><img src="${item.img}" width="50" style="cursor:pointer;" onclick="showImage('${item.img}')"></td>
      <td><input type="number" value="${item.stock}" min="0" data-field="stock" data-index="${i}"></td>
      <td><input type="number" value="${item.pending}" min="0" data-field="pending" data-index="${i}"></td>
      <td><input type="number" value="${item.rejected}" min="0" data-field="rejected" data-index="${i}"></td>
      <td><button class="update-btn" data-index="${i}">Update</button></td>
    `;
    tbody.appendChild(tr);
  });

  // Add event listeners for update buttons
  document.querySelectorAll('.update-btn').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const idx = e.target.dataset.index;
      const rows = document.querySelectorAll(`#inventoryTable tbody tr`);
      const inputs = rows[idx].querySelectorAll('input');
      const inventory = JSON.parse(localStorage.getItem('bloom_inventory'));
      inputs.forEach(input=>{
        const field = input.dataset.field;
        inventory[idx][field] = parseInt(input.value);
      });
      localStorage.setItem('bloom_inventory', JSON.stringify(inventory));
      alert('Inventory updated!');
    });
  });
}

// Image modal
function showImage(src){
  const modal = document.createElement('div');
  modal.style.position='fixed';
  modal.style.top=0; modal.style.left=0;
  modal.style.width='100%'; modal.style.height='100%';
  modal.style.background='rgba(0,0,0,0.7)';
  modal.style.display='flex'; modal.style.alignItems='center'; modal.style.justifyContent='center';
  modal.style.zIndex=9999;
  modal.innerHTML=`<img src="${src}" style="max-width:90%; max-height:90%; border-radius:12px;">
                   <span style="position:absolute; top:20px; right:30px; font-size:2rem; color:white; cursor:pointer;">&times;</span>`;
  modal.querySelector('span').addEventListener('click', ()=>document.body.removeChild(modal));
  document.body.appendChild(modal);
}

// Render on page load
renderInventory();

// Live update across tabs
window.addEventListener('storage', renderInventory);
</script>

</body>
</html>
